name: macOS Build

on: [push, pull_request]

jobs:
  build:
    runs-on: macos-latest
    steps:
    - name: Checkout repository
      uses: actions/checkout@v3

    - name: Install Xcode Command Line Tools
      run: |
        xcode-select --install
        # 等待用户确认安装 Command Line Tools
        until xcode-select --print-path &> /dev/null; do
          sleep 5
        done

    - name: Build project
      run: |
        make -f Makefile.Darwin